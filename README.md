# CatFeeder
- Автоматическая кормушка для домашних питомцев на esp8266
- Создана на основе оригинального проекта AlexGyver
- Страница проекта AlexGyver (схемы, описания): https://alexgyver.ru/gyverfeed2/
- Исходники скетча AlexGyver: https://github.com/AlexGyver/GyverFeed2/
- Идея переноса на esp8266 Sohm777 https://github.com/sohm777/feeder/

# Особенности
- Oled дисплей 
- Автоматическое выключение экрана при простое
- Управление 2 кнопками
- Полноценный веб интерфейс для управления устройством
- Часы с синхронизацией времени по протоколу NTP
- Управление по MQTT с возможной интеграцией в систему умного дома через Яндекс Алису или Home Asistent
- 4 независимых будильника для кормления в заданное время
- Возможность внеочередного кормления по нажатию кнопки, через веб интерфейс или отправки сообщения в MQTT топик
- Видимость и настройка порции кормления как через веб интерфейс, так и на oled экране
- Обновление прошивки по воздуху

# Компиляция и прошивка
Все использованные библиотеки находятся в папке libraries в архиве проекта. 
Настройки arduino ide для NodeMCU
![](/settings.png)
Файловую систему заливать вот по этому гайду https://randomnerdtutorials.com/install-esp8266-filesystem-uploader-arduino-ide/ , предварительно внеся в data/config.json настройки WiFi и прочего. Либо же задав их в скетче. Тогда config.json будет создан автоматически

# Схема подключения
![](/scheme.png)

# Веб интерфейс
При первом запуске, если вы проигнорировали предыдущий шаг, и не стали изменять настройки WiFi, либо кормушке не удалось подключиться к вашей сети WiFi, то устройство перейдет в режим точки доступа с именем CatFeeder и паролем 12345678. После чего запустит веб интерфейс по адресу 192.168.4.1, где вы сможете произвести все необходимые настройки. Если же подключение к вашей сети WiFi было успешным, то веб интерфейс будет доступен по адресу указанному на первом экране Oled дисплея

# Управление кнопками
На основном экране. Одиночное нажатие Кнопки 1 - Выдать порцию корма. Одиночное нажатие Кнопки 2. Перейти на экран настройки будильников. Долгое нажатие кнопки 2. Перейти на экран настроек.
На экране будильников. Долгое нажатие Кнопки 2 - переход в режим редактирования. Короткое нажатие кнопки 2 - возврат на основной экран. В режиме редактирования Кнопка 1 - вверх, Кнопка 2 - вниз. Долгое нажатие Кнопки 1 - изменение настроек. Долгое нажатие Кнопки 2 - сохранение параметров и выход из режима редактирования
На экране настроек. Кнопка 1 - изменение. Кнопка 2 - переход к следующему пункту. Долгое нажатие Кнопки 2 - сохранение настроек и выход на основной экран

# MQTT
На данный момент устройство подписано лишь на один топик CatFeeder/feed. При обнаружении сообщения feed включается выдача порции. В дальнейшем буду работать над улучшением функционала
